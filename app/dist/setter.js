!function(){"use strict";angular.module("setter",["ui.router","toaster","ngAnimate"]).config(["$stateProvider","$urlRouterProvider",function(o,t){t.otherwise("/account/login");var e="/public/src/setter/";o.state("account",{url:"/account",templateUrl:e+"account/account.tpl",controller:"AccountController as account"}).state("account.login",{url:"/login",templateUrl:e+"account/login/login.tpl",controller:"LoginController as login"}).state("account.signup",{url:"/signup",templateUrl:e+"account/signup/signup.tpl",controller:"SignupController as signup"}).state("addQuestion",{url:"/add",templateUrl:e+"/addQuestion/add.tpl",controller:"AddController as add"})}])}(),function(){"use strict";angular.module("setter").controller("AccountController",function(){})}(),function(){"use strict";angular.module("setter").factory("Account",["$http",function(o){return{login:function(t){return o.post("/setterLogin",t).then(function(o){return console.log("Response",o),o})},signup:function(t){return o.post("/setterSignup",t)}}}])}(),angular.module("setter").controller("AddController",["User","toaster",function(o,t){function e(){o.getTags().then(function(o){if(o.data.err===!1){n.tags=o.data.tags;var e=n.tags.length/2;n.tags1=n.tags.slice(0,e),n.tags2=n.tags.slice(e,2*e),console.log(o.data.tags)}else t.pop("error","Colud not get Tags",o.data.msg)})["catch"](function(o){t.pop("error","Server No gud ","Ouuta here")})}console.log("add Controller");var n=this;n.question={},n.addText="Add",n.submit=function(){if(console.log(n.question),!(n.question.questionText&&n.question.option1&&n.question.option2&&n.question.option3&&n.question.option4&&n.question.correct))return void t.pop("error","Error ocurred","Missing Values");n.addText="Adding.............";var e=o.add(n.question,n.selectedTags);console.log(e instanceof Error),e instanceof Error?(n.addText="Add",t.pop("error","Error ocurred","Type the question")):e.then(function(o){console.log(o),0==o.data.err?(console.log("Successfully added"),n.question.questionText="",n.question={},t.pop("success","Success","Question Added")):(console.log("error"),t.pop("error","Error ocurred","Missing Values")),n.addText="Add"})["catch"](function(o){n.question.questionText="",n.question={},console.log("Errror",o),t.pop("error","Error ocurred","OOps Try Again"),n.addText="Add"})},n.addTag=function(r){if(13===r.keyCode){var u=o.newTag({name:n.newTagText});u instanceof Error?t.pop("error","Error","Could not add Tags"):u.then(function(o){e(),o.data.err===!1?(n.newTagText="",t.pop("success","Success","New tag added")):t.pop("error","Error",o.data.msg)})["catch"](function(o){console.log(o),t.pop("error","Error",response.data.msg)})}},e(),n.Select=function(){console.log(n.tagSelect);var o=[];for(var t in n.tagSelect)n.tagSelect[t]===!0&&o.push(t);n.selectedTags=o}}]),angular.module("setter").factory("User",["$http",function(o){function t(){return a?a:o({method:"GET",url:"/secure/question",params:{token:s}}).then(function(o){return a=o.data.questions,o})}function e(){return s}function n(o,t,e){l.name=o,l.ids=e,l.group=t}function r(){return l}function u(){var t=[];return l.ids.forEach(function(o){t.push(a[o].Id)}),o.post("/secure/test",{token:s,ids:t,name:l.name,group:l.group})}var s=null,c=null,i=null,a=null,l={ids:[],name:null,group:null},g=function(t){return console.log(t),o.post("/login",t).then(function(o){return console.log(o),s=o.data.token,c=o.data.teacher.Subject,i=o.data.teacher.Username,o})["catch"](function(o){return console.log(o),o})},d=function(t,e){if(console.log("Q in addQues factory",t),s&&c&&i){var n={questionText:t.questionText,option1:t.option1,option2:t.option2,option3:t.option3,option4:t.option4,token:s,subject:c,correct:t.correct,tags:e};return console.log(n),o.post(Host.add+"/secure/question",n)}return console.log("This hould not be happening"),new Error("Go to hell")},p=function(t){return s&&t.name?o.post("/secure/tags",{name:t.name,token:s}):new Error("Not signed in or no tag")},f=function(){return o.get("/tags")},T=function(){return!!s};return{login:g,add:d,newTag:p,getTags:f,isLoggedIn:T,getQuestions:t,setTest:n,getTest:r,createTest:u,getToken:e}}]),function(){"use strict";angular.module("setter").controller("LoginController",["Account","$state",function(o,t){var e=this;e.loginText="Log In",e.errorText="",e.doLogin=function(){console.log("Signup",e.user),o.login(e.user).then(function(o){e.errorText="Logged In",t.go("addQuestion")})["catch"](function(o){e.errorText=o.data.msg})}}])}(),function(){"use strict";angular.module("setter").controller("SignupController",["Account",function(o){var t=this;t.signupText="Sign Up",t.errorText="",t.doSignup=function(){console.log("Signpup",t.user),o.signup(t.user).then(function(o){console.log("response",o),t.errorText="Signed Up! Pending Verification from admin"})["catch"](function(o){console.log("reason",o),t.errorText="Well. Some error occured. Try Again"})}}])}();